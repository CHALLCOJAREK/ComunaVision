/* C:\Proyectos\ComunaVision\Frontend\src\pages\Home\HomePage.module.css */
/* Scope-only: NO tokens nuevos, NO :root, NO hardcodes */

/* =========================================================
   BASE
========================================================= */
.home{
  width: 100%;
  animation: cvFadeUp var(--t-med) ease both;
}

/* Contenedor tipo “page” (sin tocar Layout) */
.home{
  padding: var(--sp-5) 0;
}

/* =========================================================
   GRID (arregla el “vacío” gigante)
   - 1er widget (export) ocupa 12
   - los otros 2 ocupan 6 y 6 (fill perfecto)
========================================================= */
.grid{
  width: min(1200px, calc(100% - 32px));
  margin-inline: auto;
  margin-top: var(--sp-4);

  display:grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 16px;
}

/* por defecto, los widgets “normales” llenan 6 columnas */
.grid > .widget:not(.widgetWide){
  grid-column: span 6;
}

/* wide ocupa todo */
.widgetWide{
  grid-column: span 12;
}

/* =========================================================
   WIDGETS (más “premium”, menos “globo inflado”)
========================================================= */
.widget{
  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background:
    radial-gradient(900px 420px at 15% 10%, color-mix(in srgb, var(--brand) 10%, transparent), transparent 55%),
    radial-gradient(900px 420px at 85% 20%, color-mix(in srgb, rgba(167,139,250,.40) 20%, transparent), transparent 55%),
    linear-gradient(180deg, color-mix(in srgb, var(--panel) 92%, transparent), var(--panel));
  border-radius: 22px;
  box-shadow: var(--shadow2);
  backdrop-filter: blur(14px);

  padding: 18px;
  min-width: 0;
}

/* Cabecera widget */
.widgetTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: var(--sp-3);
  min-width: 0;
}

.widgetTitle{
  font-size: 14px;
  font-weight: 800;
  letter-spacing: .3px;
  color: color-mix(in srgb, var(--text) 90%, transparent);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* =========================================================
   HERO (que se vea “header” real y no un banner largo)
========================================================= */
.hero{
  width: min(1200px, calc(100% - 32px));
  margin-inline: auto;

  display:flex;
  align-items:stretch;
  justify-content:space-between;
  gap: 18px;

  padding: 20px 20px;
}

.heroLeft{
  display:flex;
  flex-direction:column;
  gap: 10px;
  min-width: 0;
}

.heroTitle{
  font-size: 26px;
  font-weight: 950;
  letter-spacing: .3px;
  line-height: 1.1;
}

.heroSub{
  font-size: 13px;
  color: color-mix(in srgb, var(--text) 70%, transparent);
}

.actions{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 8px;
}

.heroRight{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  justify-content:flex-start;
  gap: 12px;
  min-width: 0;
}

/* Meta */
.meta{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap: 10px;
  flex-wrap: wrap;
}

.status{
  display:flex;
  align-items:center;
  gap: 8px;

  padding: 9px 12px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);

  font-size: 12px;
  font-weight: 800;
  white-space: nowrap;
}

.good{
  border-color: color-mix(in srgb, var(--ok) 55%, var(--stroke));
  background: color-mix(in srgb, var(--ok) 12%, var(--panel));
}

.bad{
  border-color: color-mix(in srgb, var(--bad) 55%, var(--stroke));
  background: color-mix(in srgb, var(--bad) 12%, var(--panel));
}

.pill{
  display:flex;
  align-items:center;
  gap: 8px;

  padding: 9px 12px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);

  font-size: 12px;
  min-width: 0;
}

.refresh{
  display:inline-flex;
  align-items:center;
  justify-content:center;

  width: 40px;
  height: 40px;
  border-radius: 14px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);

  cursor: pointer;
  transition: transform var(--t-fast) ease, border-color var(--t-fast) ease, background var(--t-fast) ease;
}

.refresh:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--stroke));
  background: color-mix(in srgb, var(--brand) 12%, var(--panel));
}

.refresh:disabled{
  opacity: .65;
  cursor: not-allowed;
  transform:none;
}

/* Toast (pegado al costado, sin “caja enorme”) */
.toast{
  align-self:flex-end;
  display:flex;
  align-items:center;
  justify-content:center;

  padding: 10px 12px;
  border-radius: 16px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);

  font-weight: 900;
  font-size: 12px;
  white-space: nowrap;

  max-width: 260px;
  overflow: hidden;
  text-overflow: ellipsis;

  animation: cvFadeUp var(--t-fast) ease both;
}

.toastOk{
  border-color: color-mix(in srgb, var(--ok) 55%, var(--stroke));
  background: color-mix(in srgb, var(--ok) 12%, var(--panel));
}

.toastBad{
  border-color: color-mix(in srgb, var(--bad) 55%, var(--stroke));
  background: color-mix(in srgb, var(--bad) 12%, var(--panel));
}

.toastInfo{
  border-color: color-mix(in srgb, var(--brand) 55%, var(--stroke));
  background: color-mix(in srgb, var(--brand) 12%, var(--panel));
}

/* =========================================================
   BUTTONS (más consistentes)
========================================================= */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 10px;

  padding: 12px 16px;
  border-radius: 18px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);
  color: var(--text);

  cursor:pointer;
  font-weight: 900;
  font-size: 13px;

  transition: transform var(--t-fast) ease, border-color var(--t-fast) ease, background var(--t-fast) ease, box-shadow var(--t-fast) ease;
  user-select: none;
}

.btn:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--stroke));
  background: color-mix(in srgb, var(--brand) 12%, var(--panel));
}

.btn:active{
  transform: translateY(0px);
}

.primary{
  border-color: color-mix(in srgb, var(--brand) 60%, var(--stroke));
  background: color-mix(in srgb, var(--brand) 16%, var(--panel));
  box-shadow: var(--shadow1);
}

/* =========================================================
   EXPORTACIONES (más compacto y alineado)
========================================================= */
.exportBar{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap: 12px;
  flex-wrap: wrap;
  min-width: 0;
}

.segment{
  display:flex;
  align-items:center;
  gap: 6px;

  padding: 6px;
  border-radius: 16px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);
  box-shadow: var(--shadow1);
}

.segBtn{
  display:flex;
  align-items:center;
  gap: 8px;

  padding: 11px 14px;
  border-radius: 14px;

  border: 1px solid transparent;
  background: transparent;
  color: var(--text);

  cursor: pointer;
  font-weight: 900;
  transition: transform var(--t-fast) ease, background var(--t-fast) ease, border-color var(--t-fast) ease;
  user-select: none;
}

.segBtn:hover{
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--panel) 72%, transparent);
  border-color: color-mix(in srgb, var(--stroke) 75%, transparent);
}

.segActive{
  background: color-mix(in srgb, var(--brand) 14%, transparent);
  border-color: color-mix(in srgb, var(--brand) 42%, var(--stroke));
}

/* Switch más “de producto” */
.switchWrap{
  display:flex;
  align-items:center;
  gap: 10px;

  padding: 6px 12px;
  border-radius: 16px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);
  box-shadow: var(--shadow1);
}

.switchLabel{
  font-size: 12px;
  font-weight: 800;
  color: color-mix(in srgb, var(--text) 75%, transparent);
  white-space: nowrap;
}

.switch{
  width: 46px;
  height: 28px;
  border-radius: 999px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--bg1) 55%, transparent);

  position: relative;
  cursor: pointer;

  transition: background var(--t-fast) ease, border-color var(--t-fast) ease, transform var(--t-fast) ease;
}

.switch:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--stroke));
}

.switchThumb{
  width: 22px;
  height: 22px;
  border-radius: 999px;

  background: color-mix(in srgb, var(--text) 92%, transparent);
  position: absolute;
  top: 50%;
  left: 3px;
  transform: translateY(-50%);

  box-shadow: var(--shadow1);
  transition: left var(--t-fast) ease, background var(--t-fast) ease;
}

.switchOn{
  background: color-mix(in srgb, var(--brand) 24%, transparent);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--stroke));
}

.switchOn .switchThumb{
  left: 21px;
  background: color-mix(in srgb, var(--brand) 70%, white);
}

.exportBtn{
  min-width: 170px;
  border-radius: 18px;
}

/* =========================================================
   LINKS (ya no “lista flaca”; ahora grid como dashboard)
========================================================= */
.links{
  margin-top: 14px;
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.linkBtn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 10px;

  padding: 14px 14px;
  border-radius: 18px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);
  color: var(--text);

  font-weight: 900;
  font-size: 13px;

  transition: transform var(--t-fast) ease, border-color var(--t-fast) ease, background var(--t-fast) ease;
  user-select: none;

  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.linkBtn:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--stroke));
  background: color-mix(in srgb, var(--brand) 12%, var(--panel));
}

/* =========================================================
   ACCESO RÁPIDO (más “cards” y menos botones sueltos)
========================================================= */
.quickGrid{
  margin-top: 14px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

.quickBtn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 10px;

  padding: 16px 12px;
  border-radius: 20px;

  border: 1px solid color-mix(in srgb, var(--stroke) 85%, transparent);
  background: color-mix(in srgb, var(--panel) 88%, transparent);
  color: var(--text);

  font-weight: 950;
  cursor: pointer;
  user-select: none;

  transition: transform var(--t-fast) ease, border-color var(--t-fast) ease, background var(--t-fast) ease;
}

.quickBtn:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--stroke));
  background: color-mix(in srgb, var(--brand) 12%, var(--panel));
}

/* =========================================================
   SIN SCROLL / OVERFLOW CONTROL (horiz)
========================================================= */
.home, .grid, .widget, .hero, .widgetTop, .meta{
  min-width: 0;
}

.exportBar{ min-width: 0; }
.segment{ min-width: 0; }
.segBtn{ min-width: 0; }

/* =========================================================
   RESPONSIVE
========================================================= */
@media (max-width: 980px){
  .hero{
    flex-direction: column;
    align-items: stretch;
  }
  .heroRight{
    align-items:flex-start;
  }
  .meta{
    justify-content:flex-start;
  }
  .toast{
    align-self:flex-start;
  }

  .grid > .widget:not(.widgetWide){
    grid-column: span 12;
  }

  .links{
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (max-width: 720px){
  .home{ padding: var(--sp-4) 0; }

  .grid{
    width: min(1200px, calc(100% - 22px));
    gap: 12px;
  }

  .widget{
    padding: 16px;
    border-radius: 20px;
  }

  .links{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .quickGrid{
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }

  .exportBtn{
    width: 100%;
    min-width: 0;
  }

  .exportBar{
    justify-content:flex-start;
  }
}

@media (max-width: 420px){
  .btn{
    width: 100%;
  }
  .actions{
    width: 100%;
  }
  .actions > button{
    width: 100%;
  }
}